<div class="row header">
    <ng-include src="'app/views/header.html'"></ng-include>
</div>
<div class="row" style="padding-top:0">
    <div class="col-md-2 navbar hidden-md hidden-sm hidden-xs">
        <ng-include src="'app/views/menu.html'"></ng-include>
    </div>


    <div class="col-md-10 content">
        <div class="incidents">
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <h3>
                        <span class="incidentLabel">Incidents |</span>
                        <a class="btn btn-sm btn-primary add-incident" ui-sref="addincident">
                            <i class="glyphicon glyphicon-plus menu-icon"></i>Add</a>

                        <a class="btn btn-sm btn-danger delete-incident">
                            <i class="glyphicon glyphicon-trash menu-icon"></i>Delete</a>

                    </h3>
                </div>
                <div class="col-md-6 col-sm-12">
                   
                            <div class="floatRight">
                                    <a class="btn btn-sm btn-primary" id="btnAdvanceSearch" data-toggle="modal" data-target="#myModal" ng-click="loadAPI()">
                                        <i class="glyphicon glyphicon-search"></i>Advanced Search</a>
                                    <a class="btn btn-sm btn-primary delete-incident " ng-click="reset()">
                                        <i class="glyphicon glyphicon-done menu-icon"></i>Reset</a>
                                </div>
                       
                            <div class="searchbox">
                                <div class="input-group stylish-input-group">
                                    <input type="text" class="form-control" placeholder="Search" ng-model="search">
                                    <span class="input-group-addon">
                                        <button type="button">
                                            <span class="glyphicon glyphicon-search"></span>
                                        </button>
                                    </span>

                                </div>
                            </div>
                   </div>
            </div>




            <table class="table table-bordered incident-list">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" class="checkbox checkbox-primary" style="display:inline" ng-model="allIncidentsSelected" ng-change="incidentSelectionChanged()"
                            /> All
                        </th>
                        <th ng-click="changeSortBy('uniqueIncidentId')">Incident ID
                            <span ng-if="sortBy == 'uniqueIncidentId' && !reverse" class="glyphicon glyphicon-sort-by-attributes"></span>
                            <span ng-if="sortBy == 'uniqueIncidentId' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                            <!--(Unique, auto generated by system)-->
                        </th>

                        <th ng-click="changeSortBy('reportedBy')">Reported By
                            <span ng-if="sortBy == 'reportedBy' && !reverse" class="glyphicon glyphicon-sort-by-attributes"></span>
                            <span ng-if="sortBy == 'reportedBy' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                            <!--(Last Name, First Name)-->
                        </th>

                        <th ng-click="changeSortBy('incidentStatus')">Status
                            <span ng-if="sortBy == 'incidentStatus' && !reverse" class="glyphicon glyphicon-sort-by-attributes"></span>
                            <span ng-if="sortBy == 'incidentStatus' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        </th>
                        <th ng-click="changeSortBy('organizationDescription')">Organization
                            <span ng-if="sortBy == 'organizationDescription' && !reverse" class="glyphicon glyphicon-sort-by-attributes"></span>
                            <span ng-if="sortBy == 'organizationDescription' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        </th>
                        <th ng-click="changeSortBy('departmentDescription')">Department
                            <span ng-if="sortBy == 'departmentDescription' && !reverse" class="glyphicon glyphicon-sort-by-attributes"></span>
                            <span ng-if="sortBy == 'departmentDescription' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        </th>
                        <th ng-click="changeSortBy('positionDescription')">Investigator Name
                            <span ng-if="sortBy == 'investigatorFullName' && !reverse" class="glyphicon glyphicon-sort-by-attributes"></span>
                            <span ng-if="sortBy == 'investigatorFullName' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        </th>
                        <th ng-click="changeSortBy('openedDateTime')">Date Opened
                            <span ng-if="sortBy == 'openedDateTime' && !reverse" class="glyphicon glyphicon-sort-by-attributes"></span>
                            <span ng-if="sortBy == 'openedDateTime' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        </th>
                        <th ng-click="changeSortBy('closedDateTime')">Date Closed
                            <span ng-if="sortBy == 'closedDateTime' && !reverse" class="glyphicon glyphicon-sort-by-attributes"></span>
                            <span ng-if="sortBy == 'closedDateTime' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                            <!--(If any)-->
                        </th>

                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="incident in data  | filter:search | orderBy : sortBy : reverse track by incident.id">
                        <td>
                            <input type="checkbox" ng-model="incident.selected" ng-change="incidentSelectionChanged(incident)" ng-checked="incident.selected"
                                class="checkbox checkbox-primary">
                        </td>
                        <td>
                            <a ui-sref="editincident({uniqueIncidentId: incident.uniqueIncidentId})">{{incident.uniqueIncidentId}}</a>
                        </td>
                        <td>
                            {{incident.reportedBy==null?"":incident.reportedBy}}
                        </td>
                        <td>
                            {{incident.incidentStatus==null?"":incident.incidentStatus}}
                        </td>
                        <td>
                            {{incident.organizationDescription ==null?"":incident.organizationDescription }}
                        </td>
                        <td>
                            {{incident.departmentDescription == null?"":incident.departmentDescription}}
                        </td>
                        <td>
                            {{incident.investigatorFullName == null?"":incident.investigatorFullName}}
                        </td>
                        <td>
                            {{incident.openedDateTime == null?"":incident.openedDateTime}}
                        </td>
                        <td>
                            {{incident.closedDateTime==null?"":incident.closedDateTime}}
                        </td>
                    </tr>
                </tbody>
            </table>

            <nav aria-label="Page navigation" ng-if="data && data.length > 0">
                <select class="form-control" ng-options="entry.value as entry.value for entry in entry" ng-model="$parent.entryCount" ng-change="getEntries()"></select>
                <ul class="pagination">
                    <li>
                        <a aria-label="Previous" ng-click="goToPage(currentPage - 1)" ng-class="{disabled:currentPage==1}">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li ng-repeat="page in range(totalIncidentCount,$parent.entryCount)" ng-class="{'active':currentPage == page}">
                        <a ng-click="goToPage(page)">{{page}}</a>
                    </li>
                    <li>
                        <a aria-label="Next" ng-click="goToPage(currentPage + 1)" ng-class="{disabled:currentPage==Math.ceil(totalIncidentCount/$parent.entryCount)}">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
                <span>{{$parent.entryCount * currentPage - $parent.entryCount + 1}} - {{$parent.entryCount * currentPage > totalIncidentCount
                    ? totalIncidentCount : $parent.entryCount * currentPage}} of {{totalIncidentCount}}</span>
            </nav>
            <h3 class="text-center" ng-if="!data || data.length == 0">no records found!</h3>

            <div id="myModal" class="modal fade" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h3 class="modal-title">Advanced Search</h3>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-lg-4 col-sm-6 col-md-4">
                                    <label>Incident ID</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-2">
                                    <select class="form-control" ng-model="idOp">
                                        <option value="EQ" selected>Equals</option>
                                        <option value="NEQ">Not equals</option>
                                        <option value="STARTS_WITH">Starts with</option>
                                        <option value="ENDS_WITH">Ends with</option>
                                        <option value="CONTAINS">Contains</option>
                                        <option value="NOT_CONTAINS">Does not contain</option>

                                    </select>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">
                                    <input type="text" class="form-control" ng-model="IncidentId" />
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Incident Opened Date</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-2">
                                    <select class="form-control" ng-model="opendateop">
                                        <option value="GT" selected>Greater than or equal to</option>
                                        <option value="LT">Less than or equal to</option>


                                    </select>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">
                                    <p class="input-group">
                                        <input type="text" ng-focus="calendar.open($event,'IncOpenedDate')" class="form-control" uib-datepicker-popup="dd/MM/yyyy"
                                            ng-model="IncOpenedDate" is-open="calendar.opened.IncOpenedDate" datepicker-options="dateOptions"
                                            close-text="Close" alt-input-formats="altInputFormats" />
                                        <span class="input-group-addon" ng-click="calendar.open($event,'IncOpenedDate')">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </p>
                                </div>

                                <!-- <div class="col-lg-4 col-sm-6 col-md-6">
                                    <div class='input-group date' data-provide="datepicker" data-date-format="dd/mm/yyyy">
                                        <input type='text' class="form-control" ng-model="IncOpenedDate" />
                                        <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div>

                                </div> -->
                            </div>
                            <div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Incident Closed Date</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-2">
                                    <select class="form-control" ng-model="closedateop">
                                        <option value="GT" selected>Greater than or equal to</option>
                                        <option value="LT">Less than or equal to</option>


                                    </select>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">
                                    <p class="input-group">
                                        <input type="text" ng-focus="calendar.open($event,'IncClosedDate')" class="form-control" uib-datepicker-popup="dd/MM/yyyy"
                                            ng-model="IncClosedDate" is-open="calendar.opened.IncClosedDate" datepicker-options="dateOptions"
                                            close-text="Close" alt-input-formats="altInputFormats" />
                                        <span class="input-group-addon" ng-click="calendar.open($event,'IncClosedDate')">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </p>
                                    <!-- <div class='input-group date' data-provide="datepicker" data-date-format="dd/mm/yyyy">
                                        <input type='text' class="form-control" ng-model="IncClosedDate" />
                                        <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div> -->

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Incident Status</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">
                                    <select class="form-control" ng-model="IncidentStatus">
                                        <option value="DRAFT" selected>Draft</option>
                                        <option value="NEW">New</option>
                                        <option value="ASSIGNED">Assigned</option>
                                        <option value="IN_PROGRESS">In-progress</option>
                                        <option value="SUSPENDED">Suspended</option>
                                        <option value="CLOSED">Closed</option>
                                    </select>

                                </div>
                            </div>
                            <!--<div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Person Injured</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">
                                    <select class="form-control" ng-model="personInjured">
                                     <option value="Y" selected>Yes</option>
                                    <option value="N">No</option>

                                </select>
                                </div>
                            </div>-->
                            <!--<div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Property Damage</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">
                                    <select class="form-control" ng-model="propertyDamage">
                                     <option value="Y" selected>Yes</option>
                                    <option value="N">No</option>

                                </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Crime Involved?</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">
                                    <select class="form-control" ng-model="crimeInvolved">
                                     <option value="Y" selected>Yes</option>
                                    <option value="N">No</option>

                                </select>
                                </div>
                            </div>-->
                            <div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Incident Type</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">
                                    <select class="form-control" ng-options="incidentType.id as incidentType.description for incidentType in incidentType" ng-model="SincidentType"
                                    />

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Incident Category</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-6">

                                    <input type="checkbox" ng-model="prop" />Asset Damage
                                    <br/>
                                    <input type="checkbox" ng-model="cAttack" />Criminal Attack
                                    <br/>
                                    <input type="checkbox" ng-model="Acc" />Accident Damage
                                    <br/>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Location</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-3">
                                    <select class="form-control" ng-options="incidentLoc.id as incidentLoc.description for incidentLoc in incidentLoc" ng-model="SincidentLoc"
                                        ng-change="getIncidentLocDetail()" />

                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-3">
                                    <select class="form-control" ng-options="incidentLocDetail.id as incidentLocDetail.description for incidentLocDetail in incidentLocDetail"
                                        ng-model="SincidentLocDetail" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label>Reported By</label>
                                </div>
                                <div class="col-lg-4 col-sm-6 col-md-3">
                                    <!--<input name="states" id="states" type="text" placeholder="enter a state" ng-model="user" ng-change="userLookup()" ng-model-options="{debounce:1000}" typeahead="userInfo as userInfo.fullName for userInfo in userInfo | limitTo:8" class="form-control">-->

                                    <input class="form-control" placeholder="Type user name" ng-model="user" ng-change="userLookup()" ng-model-options="{debounce:1000}"
                                        uib-typeahead="userIn.fullName as userIn.fullName for userIn in userInfo" />
                                </div>
                            </div>


                        </div>
                        <div class=" modal-footer ">

                            <a class="btn btn-primary" ng-click="advancedSearch()">Search</a>
                            <a class="btn btn-primary" ng-click="clearSearchParams()">Clear</a>
                            <a class="btn btn-danger" class="close " data-dismiss="modal">Close</a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
</div>